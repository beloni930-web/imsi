<!DOCTYPE html>
<html lang="ko">
<head>
  <link rel="icon" type="image/png" href="favicon.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>유피드 밴블리온</title>
  <style>
    /* -------------------------
       기본 안정화 (수정 포인트)
       ------------------------- */
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; padding: 0; background-color: #1c1c1c; color: #fff; font-family: Arial, sans-serif; -webkit-font-smoothing:antialiased; }

    /* 전체 내용 폭을 제어하는 공통 클래스:
       데스크톱에선 넓이 제한(max-width), 모바일에선 100%로 동작 */
    .site-content {
      width: 100%;
      max-width: 970px;
      margin: 0 auto;
      padding: 0 12px;
    }

    /* 헤더 */
    header {
      background-color: #003d80;
      color: white;
      padding: 11px 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header .logo { font-size: 19.8px; font-weight: bold; }
    header .auth-buttons a { color: white; text-decoration: none; margin-left: 15px; font-weight: bold; font-size: 15.4px; transition: color .3s; cursor:pointer; }
    header .auth-buttons a:hover { color: #ffcc00; }

    /* 공지 */
    .notice-box { margin: 15px auto 0 auto; text-align: left; font-size: 15.4px; font-weight: bold; color: #ffae42; }

    /* 슬라이더 */
    .slider { position: relative; margin: 10px auto; height: 275px; overflow: hidden; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); background:#101010; }
    .slides { display:flex; width:100%; height:100%; transition: transform .6s ease-in-out; }
    .slides img { flex: 0 0 100%; width:100%; height:100%; object-fit:cover; display:block; max-width:100%; }
    .dots { text-align:center; margin-top:10px; }
    .dot { height:10px; width:10px; margin:0 4px; background:#bbb; border-radius:50%; display:inline-block; cursor:pointer; }
    .dot.active { background:#003d80; }

    /* ============================
       커뮤니티 레이아웃(좌-중-우)
       ============================ */
    .community-section {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 20px;
      margin: 25px auto 0 auto;
      flex-wrap: nowrap; /* 데스크톱/모바일 모두 가로 정렬 기본 (모바일에서 사이드바 축소로 중앙 보존) */
      box-sizing: border-box;
    }

    .community-box {
      background-color: #242424;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
      flex: 0 0 180px;
      max-width: 220px;
      min-width: 120px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      box-sizing: border-box;
      transition: flex-basis .18s, max-width .18s, padding .15s;
    }

    .middle-column {
      flex: 1 1 auto;
      min-width: 0;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      gap: 16px;
      box-sizing: border-box;
    }

    .community-title { font-size:18px; font-weight:bold; margin-bottom:10px; color:#ffae42; word-break:keep-all; overflow-wrap:normal; white-space:normal; }
    .community-list { list-style:none; padding:0; margin:0; width:100%; word-break:keep-all; }
    .community-list li { margin:8px 0; line-height:1.4; }
    .community-list a { color:#ddd; text-decoration:none; font-size:16px; transition:color .3s; display:block; }
    .community-list a:hover { color:#ffae42; }

    /* icon-buttons */
    .icon-buttons {
      width: 100%;
      display:flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 0 clamp(12px, 6vw, 48px);
      box-sizing: border-box;
      margin: 0;
      gap: 24px;
    }
    .icon-button { display:flex; flex-direction:column; align-items:center; text-align:center; cursor:pointer; flex: 1 1 0; max-width: 120px; min-width: 72px; }
    .icon-button img { width:72px; height:72px; border-radius:50%; object-fit:cover; margin-bottom:8px; border:2px solid #fff; transition:transform .2s; box-shadow:0 2px 6px rgba(0,0,0,0.5); background:#222; }
    .icon-button img:hover { transform:scale(1.06); }
    .icon-button span { font-size:14px; color:#ddd; }

    .middle-box {
      background-color: #242424;
      border-radius:12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
      padding:20px;
      min-height: 110px;
      text-align:center;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .middle-box span { font-size:16px; color:#ddd; }

    /* 모달 / 입력 등은 변경 없음 */
    .modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; padding:20px; box-sizing:border-box; }
    .modal-content { width:420px; max-width: calc(100% - 40px); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px; border-radius:12px; color:white; box-shadow:0 10px 30px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.03); backdrop-filter: blur(6px) saturate(120%); display:flex; flex-direction:column; gap:12px; }
    .modal-close { position:absolute; top:10px; right:10px; background:transparent; color:#ddd; border:none; cursor:pointer; font-size:20px; padding:6px; border-radius:8px; transition:background .15s, color .15s; }
    .modal-close:hover { background: rgba(255,255,255,0.02); color:#fff; }
    input[type="email"], input[type="password"], input[type="text"] { width:100%; margin:8px 0 0 0; padding:12px 44px 12px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); background: rgba(0,0,0,0.4); color:#fff; outline:none; font-size:14px; box-sizing:border-box; }
    .primary-btn { width:100%; background: linear-gradient(90deg,#0f61b0,#0a3e7a); color:#fff; box-shadow:0 6px 18px rgba(15,97,176,0.16); border:1px solid rgba(255,255,255,0.03); padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:bold; }
    .alt-btn { flex:1; padding:8px 10px; background:transparent; border:1px solid rgba(255,255,255,0.06); color:#ddd; border-radius:8px; font-size:13px; cursor:pointer; }

    /* 프리젠테이션 */
    .presentation-carousel { width:100%; height:170px; border-radius:10px; overflow:hidden; position:relative; background: linear-gradient(180deg,#2a2a2a,#232323); box-shadow: inset 0 1px 0 rgba(255,255,255,0.02); flex:0 0 170px; }
    .inner-slides { display:flex; width:100%; height:100%; transition: transform .6s ease-in-out; }
    .inner-slide { position:relative; flex:0 0 100%; height:100%; padding:14px; box-sizing:border-box; color:#fff; display:flex; flex-direction:column; justify-content:center; background-color:#2a2a2a; background-size:cover; background-position:center; background-repeat:no-repeat; transition: background-image .3s ease; }
    .inner-slide .slide-content { position:relative; z-index:2; max-width:78%; text-shadow:0 1px 2px rgba(0,0,0,0.7); }
    .inner-slide::before { content:""; position:absolute; left:0; top:0; right:0; bottom:0; z-index:1; background: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.5)); pointer-events:none; }
    .pres-title { font-size:18px; font-weight:bold; color:#ffea8a; margin-bottom:6px; }
    .pres-desc { font-size:13px; color:#ddd; line-height:1.4; }
    .pres-dots { position:absolute; bottom:8px; left:50%; transform:translateX(-50%); display:flex; gap:6px; z-index:5; }
    .pres-dot { width:8px; height:8px; border-radius:50%; background: rgba(255,255,255,0.18); cursor:pointer; transition: transform .15s, background .15s; }
    .pres-dot.active { background:#ffae42; transform: scale(1.2); }

    /* 하단 카드 */
    .sub-lower { display:flex; gap:12px; width:100%; box-sizing:border-box; flex:1 1 auto; }
    .popular-card, .recommend-card { background-color:#1e1e1e; border-radius:8px; padding:10px; box-shadow:0 1px 6px rgba(0,0,0,0.4); box-sizing:border-box; flex:1; min-height:100px; }
    .card-title { font-size:14px; color:#ffae42; font-weight:bold; margin-bottom:8px; }
    .popular-list { list-style:none; padding:0; margin:0; color:#ddd; font-size:13px; line-height:1.45; }
    .popular-list li { margin:6px 0; }
    .rec-banner { width:100%; height:80px; border-radius:6px; overflow:hidden; margin-bottom:8px; display:flex; align-items:center; justify-content:center; background: linear-gradient(90deg,#2b2b2b,#222); }
    .rec-banner img { max-width:100%; max-height:100%; object-fit:cover; }

    /* 뉴스 스트립 */
    #extraNewsContainer { margin:20px auto 24px auto; box-sizing:border-box; }
    #extraNewsWrapper { display:flex; gap:12px; overflow-x:auto; scroll-behavior:smooth; padding-bottom:6px; }
    .extra-card { flex:0 0 220px; background:#1f1f1f; border-radius:8px; overflow:hidden; box-shadow:0 1px 6px rgba(0,0,0,0.5); }

    /* IP 모달 스타일 */
    .ip-modal { display:none; position:fixed; z-index:2000; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.65); justify-content:center; align-items:center; padding:20px; box-sizing:border-box; }
    .ip-content { width:460px; max-width: calc(100% - 40px); background: rgba(12,12,12,0.90); border-radius:12px; padding:18px; color:#eee; position:relative; box-shadow:0 6px 30px rgba(0,0,0,0.6); overflow:hidden; }
    .ip-computer { position:absolute; top:12px; right:12px; width:84px; height:84px; display:flex; align-items:center; justify-content:center; pointer-events:none; opacity:0.98; }
    .ip-title { font-size:18px; font-weight:700; color:#ffea8a; margin-bottom:6px; }
    .ip-desc { font-size:13px; color:#d6d6d6; margin-bottom:12px; }
    .ip-loading { display:inline-flex; align-items:center; gap:10px; margin-bottom:12px; }
    .spinner { width:16px; height:16px; border-radius:50%; border:3px solid rgba(255,255,255,0.12); border-top-color:#ffae42; animation:spin 1s linear infinite; box-sizing:border-box; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .ip-steps { margin:8px 0 12px 0; padding:0; list-style:none; font-size:13px; color:#dcdcdc; line-height:1.6; }
    .ip-steps li { display:flex; align-items:center; gap:10px; opacity:.62; transition: opacity .25s, color .25s; }
    .ip-steps li.done { opacity:1; color:#bff0b1; }
    .dot-small { width:10px; height:10px; border-radius:50%; background: rgba(255,255,255,0.08); display:inline-block; flex:0 0 10px; box-sizing:border-box; }
    .ip-steps li.done .dot-small { background:#7cf09b; box-shadow: 0 0 8px rgba(124,240,155,0.12); }
    .ip-final { margin-top:12px; padding:12px; border-radius:8px; background: rgba(255,255,255,0.03); color:#ffb3b3; font-weight:700; display:none; font-size:14px; }
    .ip-final.accept { color:#bff0b1; }
    .ip-actions { display:flex; justify-content:flex-end; gap:8px; margin-top:12px; }
    .ip-actions button { background:transparent; border:1px solid rgba(255,255,255,0.08); color:#ddd; padding:8px 10px; border-radius:6px; cursor:pointer; font-weight:600; }
    .ip-actions button.primary { background:#0f3b6d; border-color:#0f3b6d; color:#fff; }

    /* 반응형 조정: 모바일에서 중앙 컬럼을 항상 보존(요청사항 반영)
       -> 기존처럼 세로 스택으로 바꾸지 않고, 사이드바 폭을 축소함 */
    @media (max-width: 900px) {
      .slider { height: 220px; }
      .icon-buttons { padding: 0 16px; gap:12px; }
      .icon-button img { width:56px; height:56px; }
      .community-box { flex: 0 0 150px; min-width:120px; max-width:180px; }
    }

    @media (max-width: 700px) {
      /* 전체 여백 축소 */
      .site-content { padding: 0 8px; }

      /* 슬라이더, 프리젠테이션 축소 */
      .slider { height: 140px; border-radius:10px; }
      .presentation-carousel { height:140px; flex:0 0 140px; }
      .middle-box { min-height: 220px; padding:12px; }

      /* 핵심: 모바일에서 가로 3컬럼 유지
         - 사이드바 폭을 좁혀 중앙영역이 항상 보이도록 함
         - 사이드바 내부 텍스트는 줄바꿈되지만 폭이 좁아져도 중앙은 우선
      */
      .community-section {
        flex-direction: row;  /* 가로 유지 */
        align-items: flex-start;
        gap: 10px;
        overflow-x: hidden;
      }

      .community-box {
        flex: 0 0 86px;      /* 사이드바를 좁혀 중앙이 보이게 함 */
        max-width: 86px;
        min-width: 64px;
        padding: 8px;
      }

      .community-list a {
        font-size: 13px;
        line-height: 1.2;
        display:block;
        white-space: normal; /* 줄바꿈 허용 (좁은 폭에서 세로로 표시) */
        overflow-wrap:break-word;
      }

      .community-title {
        font-size: 13px;
        text-align: left;
      }

      /* 가운데 컬럼 유지 (순서 변경 없음) */
      .middle-column {
        flex: 1 1 auto;
        min-width: 0;
        max-width: calc(100% - 200px); /* 보수적 여유: 좌우 사이드바 합(약 86px*2) 제외 */
      }

      .icon-buttons { padding: 0 8px; gap:10px; }
      .icon-button img { width:48px; height:48px; }
      .icon-button span { font-size:12px; }

      .pres-title { font-size:16px; }
      .pres-desc { font-size:13px; }

      .sub-lower { flex-direction: column; }
    }

  </style>
</head>
<body>

  <!-- 헤더 -->
  <header>
    <div class="logo">BANBLE LEON</div>
    <div class="auth-buttons">
      <a onclick="openModal('loginModal')">로그인</a>
      <a onclick="openModal('signupModal')">회원가입</a>
      <a id="logoutBtn" style="display:none;cursor:pointer;">로그아웃</a>
      <span id="userName" style="margin-left:15px; font-weight:bold; color:#ffcc00; display:none;"></span>
    </div>
  </header>

  <div class="site-content">

    <!-- 공지 -->
    <div class="notice-box">
      오늘의 공지: 새로운 이벤트가 시작되었습니다!
    </div>

    <!-- 슬라이더 -->
    <div class="slider" aria-hidden="false">
      <div class="slides">
        <img src="https://i.imgur.com/mL6RAMZ.png" alt="공지1">
        <img src="https://pimg.mk.co.kr/meet/neds/2020/11/image_readtop_2020_1182659_16055986074435325.jpg" alt="공지2">
        <img src="https://celcliptipsprod.s3-ap-northeast-1.amazonaws.com/tips_article_body/4c36/208331/7eb07261d46614eccf78b4ecdc7cd07a" alt="공지3">
      </div>
    </div>
    <div class="dots">
      <span class="dot active"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>

    <!-- 커뮤니티 섹션 -->
    <div class="community-section">
      <!-- 왼쪽 -->
      <div class="community-box">
        <div class="community-title">상위 커뮤니티</div>
        <ul class="community-list">
          <li><a href="#">로이친 그룹</a></li>
          <li><a href="#">르젤 커뮤니티</a></li>
          <li><a href="#">밴블리온 카페</a></li>
          <li><a href="#">명예의 관람관</a></li>
          <li><a href="#">D조 유니온 클럽</a></li>
          <li><a href="#">명예의 관람관</a></li>
          <li><a href="#">D조 유니온 클럽</a></li>
          <li><a href="#">명예의 관람관</a></li>
          <li><a href="#">D조 유니온 클럽</a></li>
          <li><a href="#">명예의 관람관</a></li>
        </ul>
      </div>

      <!-- 중앙 -->
      <div class="middle-column">
        <div class="icon-buttons">
          <div class="icon-button">
            <img src="https://i.imgur.com/dsAyje0.png" alt="버튼1">
            <span>시작하기</span>
          </div>
          <div class="icon-button">
            <img src="https://i.imgur.com/mmOgQb3.png" alt="버튼2">
            <span>모여보기</span>
          </div>
          <div class="icon-button">
            <img src="https://i.imgur.com/JUUM1a5.png" alt="버튼3">
            <span>주관활동</span>
          </div>
          <div class="icon-button">
            <img src="https://i.imgur.com/reAtoq0.png" alt="버튼4">
            <span>운영진들</span>
          </div>
        </div>

        <div class="middle-box" style="width:100%;">
          <div style="width:100%;">
            <div class="presentation-carousel" aria-label="프리젠테이션 섹션">
              <div class="inner-slides">
                <div class="inner-slide" data-bg="https://i.imgur.com/HOjNXrn.png">
                  <div class="slide-content">
                    <div class="pres-title">유니온 우리의 공간</div>
                    <div class="pres-desc">여러분의 활발한 활동은 밴블리온의 성장과 수익 확대에 보탬이 됩니다.</div>
                  </div>
                </div>

                <div class="inner-slide" data-bg="https://i.imgur.com/AsLxf9e.png">
                  <div class="slide-content">
                    <div class="pres-title">업데이트 알림</div>
                    <div class="pres-desc">시스템 점검이 예정되어 있습니다. 점검 시간 동안 일부 기능이 제한될 수 있습니다.</div>
                  </div>
                </div>

                <div class="inner-slide" data-bg="https://i.imgur.com/VhpnT3g.png">
                  <div class="slide-content">
                    <div class="pres-title">유피드 플랫폼</div>
                    <div class="pres-desc">유피드 커넥트 커뮤니케이션 플랫폼은 유니온 여러분들을 위해 밴블리온에서 "자체" 개발한 플랫폼입니다.</div>
                  </div>
                </div>
              </div>

              <div class="pres-dots" aria-hidden="false">
                <span class="pres-dot active" data-i="0"></span>
                <span class="pres-dot" data-i="1"></span>
                <span class="pres-dot" data-i="2"></span>
              </div>
            </div>

            <div class="sub-lower" style="margin-top:12px;">
              <div class="popular-card" aria-label="인기 게시물">
                <div class="card-title">인기 게시물</div>
                <ul class="popular-list">
                  <li><a class="pop-link" href="#">[공지] 서버 점검 안내</a></li>
                  <li><a class="pop-link" href="#">오늘의 베스트 스토리</a></li>
                  <li><a class="pop-link" href="#">유저 인터뷰: 운영진 Q&A</a></li>
                  <li><a class="pop-link" href="#">꿀팁: 프로필 꾸미기</a></li>
                  <li><a class="pop-link" href="#">커뮤니티 가이드 업데이트</a></li>
                </ul>
              </div>

              <div class="recommend-card" aria-label="추천 콘텐츠">
                <div class="card-title">추천 콘텐츠</div>
                <div class="rec-banner">
                  <img src="https://via.placeholder.com/420x140?text=추천+배너" alt="추천 배너">
                </div>
                <div class="rec-list">
                  - 초보자 가이드: 시작하기<br>
                  - 오늘의 인기 태그: #사진 #이벤트<br>
                  - 파트너 혜택 바로가기
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 오른쪽 -->
      <div class="community-box">
        <div class="community-title">신설 커뮤니티</div>
        <ul class="community-list">
          <li><a href="#">커뮤니티 F</a></li>
          <li><a href="#">노르웨이</a></li>
          <li><a href="#">커뮤니티 H</a></li>
          <li><a href="#">가르다라</a></li>
          <li><a href="#">커뮤니티 J</a></li>
          <li><a href="#">가르다라</a></li>
          <li><a href="#">커뮤니티 J</a></li>
          <li><a href="#">가르다라</a></li>
          <li><a href="#">커뮤니티 J</a></li>
          <li><a href="#">가르다라</a></li>
        </ul>
      </div>
    </div> <!-- community-section 끝 -->

    <!-- 뉴스 섹션 -->
    <div id="extraNewsContainer" class="site-content" style="padding:0;">
      <div id="extraNewsContainerInner" style="background:#242424; border-radius:10px; padding:12px; box-shadow:0 2px 10px rgba(0,0,0,0.45);">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
          <div style="font-size:16px; color:#ffae42; font-weight:bold;">뉴스 | 유핏이슈 | 밴블리온</div>
          <div style="display:flex; align-items:center; gap:8px;">
            <button id="extraPrev" aria-label="이전" style="background:transparent; border:1px solid #3a3a3a; color:#ddd; padding:6px 8px; border-radius:6px; cursor:pointer;">◀</button>
            <span id="extraPage" style="color:#bbb; font-size:13px;">1/1</span>
            <button id="extraNext" aria-label="다음" style="background:transparent; border:1px solid #3a3a3a; color:#ddd; padding:6px 8px; border-radius:6px; cursor:pointer;">▶</button>
          </div>
        </div>

        <div id="extraNewsWrapper" style="display:flex; gap:12px; overflow-x:auto; scroll-behavior:smooth; padding-bottom:6px;">
          <div class="extra-card">
            <img src="https://via.placeholder.com/420x240?text=썸네일1" alt="thumb1" style="width:100%; height:120px; object-fit:cover; display:block;">
            <div style="padding:10px; color:#ddd; font-size:14px; line-height:1.4;">
              경기도, 'DMZ OPEN 국제음악제' 26일 고양서 개막
            </div>
          </div>

          <div class="extra-card">
            <img src="https://via.placeholder.com/420x240?text=썸네일2" alt="thumb2" style="width:100%; height:120px; object-fit:cover; display:block;">
            <div style="padding:10px; color:#ddd; font-size:14px; line-height:1.4;">
              최휘영 장관 "전통문화, K콘텐츠 성장동력으로"
            </div>
          </div>

          <div class="extra-card">
            <img src="https://via.placeholder.com/420x240?text=썸네일3" alt="thumb3" style="width:100%; height:120px; object-fit:cover; display:block;">
            <div style="padding:10px; color:#ddd; font-size:14px; line-height:1.4;">
              트럼프, '틱톡 美 사업권 인수' 행정명령 서명
            </div>
          </div>

          <div class="extra-card">
            <img src="https://via.placeholder.com/420x240?text=썸네일5" alt="thumb5" style="width:100%; height:120px; object-fit:cover; display:block;">
            <div style="padding:10px; color:#ddd; font-size:14px; line-height:1.4;">
              문화예술 행사 안내: 지역 카페 대관 전시
            </div>
          </div>
        </div>

      </div>
    </div>

  </div> <!-- site-content 끝 -->

  <!-- IP modal (내용은 동일) -->
  <div id="ipCheckModal" class="ip-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="ip-content" role="document">
      <button class="ip-close" aria-label="닫기">&times;</button>
      <div class="ip-computer" aria-hidden="true">
        <svg width="80" height="80" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect x="4" y="10" width="56" height="36" rx="4" fill="#111827"/>
          <rect x="6" y="12" width="52" height="28" rx="2" fill="#1f2937"/>
          <rect x="8" y="15" width="48" height="6" rx="2" fill="#374151"/>
          <rect x="8" y="23" width="34" height="14" rx="1" fill="#0b1220"/>
          <rect x="44" y="23" width="12" height="12" rx="1" fill="#0b1220"/>
          <g transform="translate(44,23)">
            <rect x="2" y="1" width="8" height="8" rx="1" fill="#08121c"/>
            <path d="M6 0C4.344 0 3 1.344 3 3v1h6V3C9 1.344 7.656 0 6 0z" fill="#0ea5a4"/>
            <rect x="4" y="4" width="4" height="4" rx="0.5" fill="#062024"/>
          </g>
          <g transform="translate(2,38) scale(0.9)">
            <rect x="36" y="4" width="18" height="14" rx="2" fill="#0b1220" stroke="#94a3b8"/>
            <path d="M45 4c-3 0-5 2-5 5v3h10V9c0-3-2-5-5-5z" fill="#0ea5a4"/>
            <circle cx="45" cy="11" r="1.8" fill="#071126"/>
          </g>
        </svg>
      </div>

      <div style="padding-right:110px;">
        <div class="ip-title">IP 조회 중입니다</div>
        <div class="ip-desc">선택한 커뮤니티의 접속 IP를 실시간으로 검사합니다. 잠시만 기다려 주세요.</div>

        <div class="ip-loading">
          <div class="spinner" aria-hidden="true"></div>
          <div style="font-size:13px;color:#d6d6d6;">아이피 조회 중... <span id="ipDummy">(예: 203.***.***.***)</span></div>
        </div>

        <ul class="ip-steps" id="ipSteps">
          <li data-step="0"><span class="dot-small"></span> 네트워크 인터페이스 검사</li>
          <li data-step="1"><span class="dot-small"></span> WHOIS 정보 조회</li>
          <li data-step="2"><span class="dot-small"></span> 지리적 위치 매핑</li>
          <li data-step="3"><span class="dot-small"></span> 서버 화이트리스트 확인</li>
          <li data-step="4"><span class="dot-small"></span> 종합 보안 스캔</li>
        </ul>

        <div class="ip-final" id="ipFinal">해당 아이피는 유니온 밴블리온의 서버에서 승인된 아이피가 아닙니다.</div>

        <div class="ip-actions">
          <button id="ipRetryBtn">다시 검사</button>
          <button id="ipCloseBtn" class="primary">닫기</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 로그인/회원가입 모달 (원본 유지) -->
  <div id="loginModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="loginTitle">
    <div class="modal-content" role="document">
      <button class="modal-close" onclick="closeModal('loginModal')" aria-label="닫기">&times;</button>
      <div class="modal-inner">
        <div class="modal-brand">
          <img src="https://i.imgur.com/dsAyje0.png" alt="브랜드" style="width:56px;height:56px;border-radius:8px;">
          <div>
            <h2 id="loginTitle">로그인</h2>
            <p>계정으로 로그인하여 커뮤니티 참여를 시작하세요.</p>
          </div>
        </div>
      </div>

      <div>
        <label class="field">
          <input type="email" id="loginEmail" placeholder="이메일" />
        </label>

        <label class="field password-field">
          <input type="password" id="loginPass" placeholder="비밀번호" />
          <button type="button" class="pw-toggle" data-target="loginPass" aria-label="비밀번호 보기">👁️</button>
        </label>

        <div class="modal-actions">
          <label style="font-size:13px;color:#ccc;"><input type="checkbox" id="rememberMe" style="margin-right:6px;"/> 로그인 유지</label>
          <a href="#" style="font-size:13px;color:#ffae42;text-decoration:none;">비밀번호 찾기</a>
        </div>

        <button id="loginSubmit" class="primary-btn">로그인</button>

        <div style="display:flex;gap:8px;margin-top:8px;">
          <button class="alt-btn">카카오로 시작</button>
          <button class="alt-btn">구글로 시작</button>
        </div>
      </div>
    </div>
  </div>

  <div id="signupModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="signupTitle">
    <div class="modal-content" role="document">
      <button class="modal-close" onclick="closeModal('signupModal')" aria-label="닫기">&times;</button>
      <div class="modal-inner">
        <div class="modal-brand">
          <img src="https://i.imgur.com/mmOgQb3.png" alt="회원가입" style="width:56px;height:56px;border-radius:8px;">
          <div>
            <h2 id="signupTitle">회원가입</h2>
            <p>닉네임을 입력하고 간단히 가입하세요.</p>
          </div>
        </div>
      </div>

      <div>
        <label class="field">
          <input type="text" id="signupNickname" placeholder="닉네임" />
        </label>
        <label class="field">
          <input type="email" id="signupEmail" placeholder="이메일" />
        </label>
        <label class="field password-field">
          <input type="password" id="signupPass" placeholder="비밀번호" />
          <button type="button" class="pw-toggle" data-target="signupPass" aria-label="비밀번호 보기">👁️</button>
        </label>

        <button id="signupSubmit" class="primary-btn">회원가입</button>

        <div style="display:flex;gap:8px;margin-top:8px;">
          <button class="alt-btn">이메일 인증</button>
          <button class="alt-btn">초대코드 사용</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase 및 스크립트들 (원본 유지) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile }
      from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBJZle3txhhthWgaIWTTHzrLl4bkJqQye4",
      authDomain: "fast-gateway-290809.firebaseapp.com",
      projectId: "fast-gateway-290809",
      storageBucket: "fast-gateway-290809.firebasestorage.app",
      messagingSenderId: "640433110514",
      appId: "1:640433110514:web:8fe4fafc9a987b6a4b3f6b",
      measurementId: "G-2V57XWX7CW"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    window.openModal = function(id) {
      document.getElementById(id).style.display = "flex";
    }
    window.closeModal = function(id) {
      document.getElementById(id).style.display = "none";
    }

    function updateHeader(user) {
      const userNameEl = document.getElementById("userName");
      const loginBtn = document.querySelector(".auth-buttons a[onclick*='loginModal']");
      const signupBtn = document.querySelector(".auth-buttons a[onclick*='signupModal']");
      const logoutBtn = document.getElementById("logoutBtn");

      if (user) {
        if (loginBtn) loginBtn.style.display = "none";
        if (signupBtn) signupBtn.style.display = "none";
        if (logoutBtn) logoutBtn.style.display = "inline-block";

        if (userNameEl) {
          const name = user.displayName || user.email || "사용자";
          userNameEl.textContent = name;
          userNameEl.style.display = "inline-block";
        }
      } else {
        if (loginBtn) loginBtn.style.display = "inline-block";
        if (signupBtn) signupBtn.style.display = "inline-block";
        if (logoutBtn) logoutBtn.style.display = "none";

        if (userNameEl) {
          userNameEl.textContent = "";
          userNameEl.style.display = "none";
        }
      }
    }

    document.getElementById("signupSubmit").addEventListener("click", async () => {
      const nickname = document.getElementById("signupNickname").value;
      const email = document.getElementById("signupEmail").value;
      const pass = document.getElementById("signupPass").value;
      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
        await updateProfile(userCredential.user, { displayName: nickname });
        updateHeader(userCredential.user);
        alert("회원가입 완료!");
        closeModal("signupModal");
      } catch (error) {
        alert("회원가입 실패: " + error.message);
      }
    });

    document.getElementById("loginSubmit").addEventListener("click", async () => {
      const email = document.getElementById("loginEmail").value;
      const pass = document.getElementById("loginPass").value;
      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, pass);
        updateHeader(userCredential.user);
        alert("로그인 성공!");
        closeModal("loginModal");
      } catch (error) {
        alert("로그인 실패: " + error.message);
      }
    });

    document.getElementById("logoutBtn").addEventListener("click", async () => {
      await signOut(auth);
      updateHeader(null);
    });

    onAuthStateChanged(auth, (user) => {
      updateHeader(user);
    });
  </script>

  <!-- 슬라이더 스크립트 -->
  <script>
    let index = 0;
    const slides = document.querySelector(".slides");
    const dots = document.querySelectorAll(".dot");

    function showSlide(n) {
      index = n;
      if (slides) slides.style.transform = `translateX(${-n * 100}%)`;
      dots.forEach(dot => dot.classList.remove("active"));
      if (dots[n]) dots[n].classList.add("active");
    }

    function autoSlide() {
      const slideCount = slides ? slides.children.length : 1;
      index = (index + 1) % slideCount;
      showSlide(index);
    }

    dots.forEach((dot, i) => {
      dot.addEventListener("click", () => showSlide(i));
    });

    setInterval(autoSlide, 4000);
  </script>

  <!-- 중앙 프리젠테이션 스크립트 -->
  <script>
    (function() {
      const presSlides = document.querySelector(".inner-slides");
      const presDots = Array.from(document.querySelectorAll(".pres-dot"));
      if (!presSlides || presDots.length === 0) return;

      function applyBgToSlides() {
        const slides = Array.from(document.querySelectorAll('.inner-slide'));
        slides.forEach(slide => {
          const bg = slide.getAttribute('data-bg') || '';
          if (bg.trim()) slide.style.backgroundImage = `url("${bg}")`;
          else slide.style.backgroundImage = '';
        });
      }

      applyBgToSlides();

      let presIndex = 0;
      const presCount = presDots.length;

      function presShow(n) {
        presIndex = n;
        presSlides.style.transform = `translateX(${-n * 100}%)`;
        presDots.forEach(d => d.classList.remove("active"));
        presDots[n].classList.add("active");
      }

      function presAuto() {
        presIndex = (presIndex + 1) % presCount;
        presShow(presIndex);
      }

      presDots.forEach((dot, i) => {
        dot.addEventListener("click", () => {
          presShow(i);
          resetPresInterval();
        });
      });

      let presInterval = setInterval(presAuto, 5000);
      function resetPresInterval() { clearInterval(presInterval); presInterval = setInterval(presAuto, 5000); }

      presShow(0);
    })();
  </script>

  <!-- IP 체크 스크립트 -->
  <script>
    (function(){
      const leftLinks = document.querySelectorAll('.community-section .community-box:first-of-type .community-list a');

      const ipModal = document.getElementById('ipCheckModal');
      const ipClose = ipModal.querySelector('.ip-close');
      const ipCloseBtn = document.getElementById('ipCloseBtn');
      const ipRetryBtn = document.getElementById('ipRetryBtn');
      const ipStepsEl = document.getElementById('ipSteps');
      const ipFinal = document.getElementById('ipFinal');
      const ipDummy = document.getElementById('ipDummy');

      let ipTimers = [];

      function randomDummyIP(){
        const a = Math.floor(Math.random()*223)+1;
        const b = Math.floor(Math.random()*256);
        const c = Math.floor(Math.random()*256);
        const d = Math.floor(Math.random()*256);
        return `${a}.${b}.${c}.${d}`;
      }

      function openIpModal(communityName){
        clearIpTimers();
        ipStepsEl.querySelectorAll('li').forEach(li => li.classList.remove('done'));
        ipFinal.style.display = 'none';
        ipDummy.textContent = `(${randomDummyIP()})`;
        ipModal.style.display = 'flex';
        ipModal.setAttribute('aria-hidden','false');

        const steps = Array.from(ipStepsEl.querySelectorAll('li'));
        steps.forEach((stepEl, i) => {
          const t = setTimeout(() => {
            stepEl.classList.add('done');
          }, 700 + i * 800);
          ipTimers.push(t);
        });

        const totalDelay = 700 + steps.length * 800 + 600;
        const finalTimer = setTimeout(() => {
          ipFinal.textContent = '해당 아이피는 유니온 밴블리온의 서버에서 승인된 아이피가 아닙니다.';
          ipFinal.classList.remove('accept');
          ipFinal.style.display = 'block';
        }, totalDelay);
        ipTimers.push(finalTimer);
      }

      function clearIpTimers(){
        ipTimers.forEach(t => clearTimeout(t));
        ipTimers = [];
      }

      function closeIpModal(){
        clearIpTimers();
        ipModal.style.display = 'none';
        ipModal.setAttribute('aria-hidden','true');
      }

      leftLinks.forEach(a => {
        a.addEventListener('click', (ev) => {
          ev.preventDefault();
          const name = (typeof a.textContent === 'string') ? a.textContent.trim() : '커뮤니티';
          openIpModal(name);
        });
      });

      ipClose.addEventListener('click', closeIpModal);
      ipCloseBtn.addEventListener('click', closeIpModal);
      ipRetryBtn.addEventListener('click', () => { openIpModal('다시검사'); });

      document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && ipModal.style.display === 'flex') closeIpModal(); });
      ipModal.addEventListener('click', (e) => { if (e.target === ipModal) closeIpModal(); });

    })();
  </script>

  <!-- 뉴스 스트립 컨트롤 -->
  <script>
    (function(){
      const wrapper = document.getElementById('extraNewsWrapper');
      const prevBtn = document.getElementById('extraPrev');
      const nextBtn = document.getElementById('extraNext');
      const pageDisplay = document.getElementById('extraPage');
      if (!wrapper || !prevBtn || !nextBtn || !pageDisplay) return;

      function calcPages() {
        const visibleWidth = wrapper.clientWidth;
        const totalWidth = wrapper.scrollWidth;
        const pages = Math.max(1, Math.ceil(totalWidth / visibleWidth));
        return pages;
      }

      function updatePageDisplay() {
        const pages = calcPages();
        const current = Math.floor(wrapper.scrollLeft / wrapper.clientWidth) + 1;
        pageDisplay.textContent = `${Math.min(current,pages)}/${pages}`;
      }

      prevBtn.addEventListener('click', () => {
        wrapper.scrollBy({ left: -wrapper.clientWidth, behavior: 'smooth' });
        setTimeout(updatePageDisplay, 450);
      });
      nextBtn.addEventListener('click', () => {
        wrapper.scrollBy({ left: wrapper.clientWidth, behavior: 'smooth' });
        setTimeout(updatePageDisplay, 450);
      });

      let _t;
      wrapper.addEventListener('scroll', () => {
        if (_t) clearTimeout(_t);
        _t = setTimeout(() => updatePageDisplay(), 120);
      });
      window.addEventListener('resize', () => setTimeout(updatePageDisplay, 200));
      updatePageDisplay();
    })();
  </script>

  <!-- footer (원본 유지) -->
  <footer style="background:#111; color:#ccc; font-size:12px; padding:20px; text-align:center; line-height:1.5;">
    <a href="library.html?section=terms" style="color:#ccc; text-decoration:none; margin:0 4.5px;">이용약관</a> |
    <a href="library.html?section=privacy" style="color:#ccc; text-decoration:none; margin:0 4.
